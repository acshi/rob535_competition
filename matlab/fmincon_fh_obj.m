function [J, dJ] = fmincon_fh_obj(X, TestTrack, obs)
    Fx_scale = 1000;
    [J, dJ] = lookahead_dist(X, TestTrack);
    J = 1e-3*J;
    dJ = 1e-3*dJ;
    %[C, dC] = dist_to_obj(X, obs);
    %[C2, dC2] = dist_to_obj(X(end-7:end), obs);
    w1 = 0;%.1;%.1;%1;
    w2 = 0;%10;%1;
    w3 = 1;
    %w4 = 1e-6;
    w4 = 1e-9;
    %w5 = 1e-5;
    w6 = 0;
    w7 = 1e-2;
    J = J + w1*X(end-6).^2;
    J = J + w2*X(end-4).^2;
    J = J + w3*sum(X(7:8:end).^2);
    J = J + w4*sum(Fx_scale*Fx_scale*X(8:8:end).^2);
    %J = J - w5*sum(C);
    %J = J - w6*sum(C2);
    J = J + w7*sum(X(4:8:end).^2);
    dJ(end-6) = dJ(end-6) + w1*2*X(end-6);
    dJ(end-4) = dJ(end-4) + w2*2*X(end-4);
    dJ(7:8:end) = dJ(7:8:end) + 2*w3*X(7:8:end);
    dJ(8:8:end) = dJ(8:8:end) + 2*w4*Fx_scale*Fx_scale*X(8:8:end);
    %dJ = dJ - w5*sum(dC', 2);
    dJ(4:8:end) = dJ(4:8:end) + 2*w7*X(4:8:end);
    %dJ(end-7:end) = dJ(end-7:end) - w6*sum(dC2', 2);
end